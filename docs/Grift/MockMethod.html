<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  Class: Grift::MockMethod
  
    &mdash; Documentation by YARD 0.9.27
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "Grift::MockMethod";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="../_index.html">Index (M)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Grift.html" title="Grift (module)">Grift</a></span></span>
     &raquo; 
    <span class="title">MockMethod</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Grift::MockMethod
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Grift::MockMethod</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>lib/grift/mock_method.rb<span class="defines">,<br />
  lib/grift/mock_method/mock_executions.rb,<br /> lib/grift/mock_method/mock_executions/mock_arguments.rb</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>A mock for a given class and method. This is the core of Grift. Mocking or spying usually returns a <span class='object_link'><a href="" title="Grift::MockMethod (class)">MockMethod</a></span>.</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="MockMethod/MockExecutions.html" title="Grift::MockMethod::MockExecutions (class)">MockExecutions</a></span>
    
  
</p>




  <h2>Instance Attribute Summary <small><a href="#" class="summary_toggle">collapse</a></small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#klass-instance_method" title="#klass (instance method)">#<strong>klass</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute klass.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#method_access-instance_method" title="#method_access (instance method)">#<strong>method_access</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute method_access.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#method_name-instance_method" title="#method_name (instance method)">#<strong>method_name</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute method_name.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#true_method_cached-instance_method" title="#true_method_cached (instance method)">#<strong>true_method_cached</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Returns the value of attribute true_method_cached.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#hash_key-class_method" title="hash_key (class method)">.<strong>hash_key</strong>(klass, method_name)  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Hashes the class and method for tracking mocks.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">#<strong>initialize</strong>(klass, method_name, watch: true)  &#x21d2; Grift::MockMethod </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>A new instance of MockMethod.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mock-instance_method" title="#mock (instance method)">#<strong>mock</strong>  &#x21d2; Grift::MockMethod::MockExecutions </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Gets the data for the mock results and calls for this mock.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mock_clear-instance_method" title="#mock_clear (instance method)">#<strong>mock_clear</strong>  &#x21d2; Grift::MockMethod::MockExecutions </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Clears the mock execution and calls data for this mock, but keep the method mocked as before.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mock_implementation-instance_method" title="#mock_implementation (instance method)">#<strong>mock_implementation</strong>  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Accepts a block and mocks the method to execute that block instead of the original behavior whenever called while mocked.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mock_reset-instance_method" title="#mock_reset (instance method)">#<strong>mock_reset</strong>  &#x21d2; Grift::MockMethod::MockExecutions </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Clears the mock execution and calls data for this mock, and mocks the method to return ‘nil`.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mock_restore-instance_method" title="#mock_restore (instance method)">#<strong>mock_restore</strong>(watch: false)  &#x21d2; Grift::MockMethod::MockExecutions </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Clears the mock execution and calls data for this mock, and restores the method to its original behavior.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mock_return_value-instance_method" title="#mock_return_value (instance method)">#<strong>mock_return_value</strong>(return_value = nil)  &#x21d2; self </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Accepts a value and mocks the method to return that value instead of executing its original behavior while mocked.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_s-instance_method" title="#to_s (instance method)">#<strong>to_s</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>String representation of the MockMethod.</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>initialize</strong>(klass, method_name, watch: true)  &#x21d2; <tt><span class='object_link'><a href="" title="Grift::MockMethod (class)">Grift::MockMethod</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>A new instance of MockMethod. Should be initialized via <span class='object_link'><a href="../Grift.html#mock-class_method" title="Grift.mock (method)">Grift.mock</a></span> or <span class='object_link'><a href="../Grift.html#spy_on-class_method" title="Grift.spy_on (method)">Grift.spy_on</a></span></p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="../Grift.html" title="Grift (module)">Grift</a></span></span><span class='period'>.</span><span class='id identifier rubyid_spy_on'><span class='object_link'><a href="../Grift.html#spy_on-class_method" title="Grift.spy_on (method)">spy_on</a></span></span><span class='lparen'>(</span><span class='const'>MyClass</span><span class='comma'>,</span> <span class='symbol'>:my_method</span><span class='rparen'>)</span>
<span class='comment'>#=&gt; MockMethod instance with the method being watched</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>klass</span>
      
      
        <span class='type'>(<tt>Class</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the class to be mocked</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>method_name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the method to be mocked</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>watch</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>true</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>whether to start watching the method</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Error.html" title="Grift::Error (class)">Grift::Error</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="../Grift.html#mock-class_method" title="Grift.mock (method)">Grift.mock</a></span></li>
    
      <li><span class='object_link'><a href="../Grift.html#spy_on-class_method" title="Grift.spy_on (method)">Grift.spy_on</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/grift/mock_method.rb', line 30</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_klass'>klass</span><span class='comma'>,</span> <span class='id identifier rubyid_method_name'>method_name</span><span class='comma'>,</span> <span class='label'>watch:</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='const'><span class='object_link'><a href="../Grift.html" title="Grift (module)">Grift</a></span></span><span class='period'>.</span><span class='id identifier rubyid_restricted_method?'><span class='object_link'><a href="../Grift.html#restricted_method%3F-class_method" title="Grift.restricted_method? (method)">restricted_method?</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_klass'>klass</span><span class='comma'>,</span> <span class='id identifier rubyid_method_name'>method_name</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../Grift.html" title="Grift (module)">Grift</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Error.html" title="Grift::Error (class)">Error</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot mock restricted method </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_method_name'>method_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> for class </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klass'>klass</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='ivar'>@klass</span> <span class='op'>=</span> <span class='id identifier rubyid_klass'>klass</span>
  <span class='ivar'>@method_name</span> <span class='op'>=</span> <span class='id identifier rubyid_method_name'>method_name</span>
  <span class='ivar'>@true_method_cached</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@mock_executions</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="MockMethod/MockExecutions.html" title="Grift::MockMethod::MockExecutions (class)">MockExecutions</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="MockMethod/MockExecutions.html#initialize-instance_method" title="Grift::MockMethod::MockExecutions#initialize (method)">new</a></span></span>
  <span class='ivar'>@cache_method_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>CACHE_METHOD_PREFIX</span><span class='embexpr_end'>}</span><span class='tstring_content'>_</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_method_name'>method_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_to_sym'>to_sym</span>

  <span class='comment'># class methods are really instance methods of the singleton class
</span>  <span class='ivar'>@class_method</span> <span class='op'>=</span> <span class='id identifier rubyid_klass'>klass</span><span class='period'>.</span><span class='id identifier rubyid_singleton_class'>singleton_class</span><span class='period'>.</span><span class='id identifier rubyid_method_defined?'>method_defined?</span><span class='lparen'>(</span><span class='id identifier rubyid_method_name'>method_name</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span> <span class='op'>||</span>
    <span class='id identifier rubyid_klass'>klass</span><span class='period'>.</span><span class='id identifier rubyid_singleton_class'>singleton_class</span><span class='period'>.</span><span class='id identifier rubyid_private_method_defined?'>private_method_defined?</span><span class='lparen'>(</span><span class='id identifier rubyid_method_name'>method_name</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>

  <span class='ivar'>@method_access</span><span class='comma'>,</span> <span class='ivar'>@inherited</span> <span class='op'>=</span> <span class='id identifier rubyid_method_access_definition'>method_access_definition</span>
  <span class='id identifier rubyid_raise'>raise</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../Grift.html" title="Grift (module)">Grift</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Error.html" title="Grift::Error (class)">Error</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot mock unknown method </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_method_name'>method_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> for class </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klass'>klass</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='ivar'>@method_access</span>

  <span class='kw'>if</span> <span class='id identifier rubyid_class_instance'>class_instance</span><span class='period'>.</span><span class='id identifier rubyid_method_defined?'>method_defined?</span><span class='lparen'>(</span><span class='ivar'>@cache_method_name</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_raise'>raise</span><span class='lparen'>(</span><span class='const'><span class='object_link'><a href="../Grift.html" title="Grift (module)">Grift</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="Error.html" title="Grift::Error (class)">Error</a></span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Cannot mock already mocked method </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_method_name'>method_name</span><span class='embexpr_end'>}</span><span class='tstring_content'> for class </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klass'>klass</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_watch_method'>watch_method</span> <span class='kw'>if</span> <span class='id identifier rubyid_watch'>watch</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <div class="method_details first">
  <h3 class="signature first" id="klass-instance_method">
  
    #<strong>klass</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute klass.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


9
10
11</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/grift/mock_method.rb', line 9</span>

<span class='kw'>def</span> <span class='id identifier rubyid_klass'>klass</span>
  <span class='ivar'>@klass</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="method_access-instance_method">
  
    #<strong>method_access</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute method_access.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


9
10
11</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/grift/mock_method.rb', line 9</span>

<span class='kw'>def</span> <span class='id identifier rubyid_method_access'>method_access</span>
  <span class='ivar'>@method_access</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="method_name-instance_method">
  
    #<strong>method_name</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute method_name.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


9
10
11</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/grift/mock_method.rb', line 9</span>

<span class='kw'>def</span> <span class='id identifier rubyid_method_name'>method_name</span>
  <span class='ivar'>@method_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="true_method_cached-instance_method">
  
    #<strong>true_method_cached</strong>  &#x21d2; <tt>Object</tt>  <span class="extras">(readonly)</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Returns the value of attribute true_method_cached.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


9
10
11</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/grift/mock_method.rb', line 9</span>

<span class='kw'>def</span> <span class='id identifier rubyid_true_method_cached'>true_method_cached</span>
  <span class='ivar'>@true_method_cached</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="hash_key-class_method">
  
    .<strong>hash_key</strong>(klass, method_name)  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Hashes the class and method for tracking mocks.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="../Grift.html" title="Grift (module)">Grift</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Grift::MockMethod (class)">MockMethod</a></span></span><span class='period'>.</span><span class='id identifier rubyid_hash_key'>hash_key</span><span class='lparen'>(</span><span class='const'>String</span><span class='comma'>,</span> <span class='symbol'>:upcase</span><span class='rparen'>)</span>
<span class='comment'>#=&gt; &#39;String#upcase&#39;</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>klass</span>
      
      
        <span class='type'>(<tt>Class</tt>)</span>
      
      
      
    </li>
  
    <li>
      
        <span class='name'>method_name</span>
      
      
        <span class='type'>(<tt>Symbol</tt>)</span>
      
      
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the hash of the class and method</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


206
207
208</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/grift/mock_method.rb', line 206</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_hash_key'>hash_key</span><span class='lparen'>(</span><span class='id identifier rubyid_klass'>klass</span><span class='comma'>,</span> <span class='id identifier rubyid_method_name'>method_name</span><span class='rparen'>)</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_klass'>klass</span><span class='embexpr_end'>}</span><span class='tstring_content'>\#</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_method_name'>method_name</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="mock-instance_method">
  
    #<strong>mock</strong>  &#x21d2; <tt><span class='object_link'><a href="MockMethod/MockExecutions.html" title="Grift::MockMethod::MockExecutions (class)">Grift::MockMethod::MockExecutions</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Gets the data for the mock results and calls for this mock.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_my_mock'>my_mock</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Grift.html" title="Grift (module)">Grift</a></span></span><span class='period'>.</span><span class='id identifier rubyid_spy_on'><span class='object_link'><a href="../Grift.html#spy_on-class_method" title="Grift.spy_on (method)">spy_on</a></span></span><span class='lparen'>(</span><span class='const'>String</span><span class='comma'>,</span> <span class='symbol'>:upcase</span><span class='rparen'>)</span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>banana</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span>
<span class='comment'>#=&gt; &#39;BANANA&#39;
</span><span class='id identifier rubyid_my_mock'>my_mock</span><span class='period'>.</span><span class='id identifier rubyid_mock'>mock</span><span class='period'>.</span><span class='id identifier rubyid_calls'>calls</span>
<span class='comment'>#=&gt; [[]]
</span><span class='id identifier rubyid_my_mock'>my_mock</span><span class='period'>.</span><span class='id identifier rubyid_mock'>mock</span><span class='period'>.</span><span class='id identifier rubyid_results'>results</span>
<span class='comment'>#=&gt; [[&#39;BANANA&#39;]]</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="MockMethod/MockExecutions.html" title="Grift::MockMethod::MockExecutions (class)">Grift::MockMethod::MockExecutions</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="MockMethod/MockExecutions.html#calls-instance_method" title="Grift::MockMethod::MockExecutions#calls (method)">Grift::MockMethod::MockExecutions#calls</a></span></li>
    
      <li><span class='object_link'><a href="MockMethod/MockExecutions.html#results-instance_method" title="Grift::MockMethod::MockExecutions#results (method)">Grift::MockMethod::MockExecutions#results</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


72
73
74</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/grift/mock_method.rb', line 72</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mock'>mock</span>
  <span class='ivar'>@mock_executions</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mock_clear-instance_method">
  
    #<strong>mock_clear</strong>  &#x21d2; <tt><span class='object_link'><a href="MockMethod/MockExecutions.html" title="Grift::MockMethod::MockExecutions (class)">Grift::MockMethod::MockExecutions</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Clears the mock execution and calls data for this mock, but keep the method mocked as before.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="MockMethod/MockExecutions.html" title="Grift::MockMethod::MockExecutions (class)">Grift::MockMethod::MockExecutions</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


82
83
84</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/grift/mock_method.rb', line 82</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mock_clear'>mock_clear</span>
  <span class='ivar'>@mock_executions</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="MockMethod/MockExecutions.html" title="Grift::MockMethod::MockExecutions (class)">MockExecutions</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="MockMethod/MockExecutions.html#initialize-instance_method" title="Grift::MockMethod::MockExecutions#initialize (method)">new</a></span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mock_implementation-instance_method">
  
    #<strong>mock_implementation</strong>  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Accepts a block and mocks the method to execute that block instead of the original behavior whenever called while mocked.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_my_mock'>my_mock</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Grift.html" title="Grift (module)">Grift</a></span></span><span class='period'>.</span><span class='id identifier rubyid_spy_on'><span class='object_link'><a href="../Grift.html#spy_on-class_method" title="Grift.spy_on (method)">spy_on</a></span></span><span class='lparen'>(</span><span class='const'>String</span><span class='comma'>,</span> <span class='symbol'>:downcase</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_mock_implementation'>mock_implementation</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_x'>x</span> <span class='op'>=</span> <span class='int'>3</span> <span class='op'>+</span> <span class='int'>4</span>
    <span class='id identifier rubyid_x'>x</span><span class='period'>.</span><span class='id identifier rubyid_to_s'>to_s</span>
<span class='kw'>end</span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Banana</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_downcase'>downcase</span>
<span class='comment'>#=&gt; &#39;7&#39;</span></code></pre>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_my_mock'>my_mock</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Grift.html" title="Grift (module)">Grift</a></span></span><span class='period'>.</span><span class='id identifier rubyid_spy_on'><span class='object_link'><a href="../Grift.html#spy_on-class_method" title="Grift.spy_on (method)">spy_on</a></span></span><span class='lparen'>(</span><span class='const'>MyClass</span><span class='comma'>,</span> <span class='symbol'>:my_method</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_mock_implementation'>mock_implementation</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_first'>first</span><span class='comma'>,</span> <span class='id identifier rubyid_second'>second</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_kwargs'>kwargs</span><span class='op'>|</span>
    <span class='lbracket'>[</span><span class='id identifier rubyid_second'>second</span><span class='comma'>,</span> <span class='id identifier rubyid_kwargs'>kwargs</span><span class='lbracket'>[</span><span class='symbol'>:third</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_first'>first</span><span class='rbracket'>]</span>
<span class='kw'>end</span>
<span class='const'>MyClass</span><span class='period'>.</span><span class='id identifier rubyid_my_method'>my_method</span><span class='lparen'>(</span><span class='int'>1</span><span class='comma'>,</span> <span class='int'>2</span><span class='comma'>,</span> <span class='label'>third:</span> <span class='int'>3</span><span class='rparen'>)</span>
<span class='comment'>#=&gt; [2, 3, 1]</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the mock itself</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/grift/mock_method.rb', line 136</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mock_implementation'>mock_implementation</span><span class='lparen'>(</span><span class='op'>*</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_premock_setup'>premock_setup</span>
  <span class='id identifier rubyid_mock_executions'>mock_executions</span> <span class='op'>=</span> <span class='ivar'>@mock_executions</span> <span class='comment'># required to access inside class instance block
</span>
  <span class='id identifier rubyid_class_instance'>class_instance</span><span class='period'>.</span><span class='id identifier rubyid_remove_method'>remove_method</span><span class='lparen'>(</span><span class='ivar'>@method_name</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='op'>!</span><span class='ivar'>@inherited</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_method_defined?'>method_defined?</span>
  <span class='id identifier rubyid_class_instance'>class_instance</span><span class='period'>.</span><span class='id identifier rubyid_define_method'>define_method</span> <span class='ivar'>@method_name</span> <span class='kw'>do</span> <span class='op'>|</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_kwargs'>kwargs</span><span class='op'>|</span>
    <span class='id identifier rubyid_return_value'>return_value</span> <span class='op'>=</span> <span class='kw'>yield</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_kwargs'>kwargs</span><span class='rparen'>)</span>

    <span class='comment'># record the args passed in the call to the method and the result
</span>    <span class='id identifier rubyid_mock_executions'>mock_executions</span><span class='period'>.</span><span class='id identifier rubyid_store'>store</span><span class='lparen'>(</span><span class='label'>args:</span> <span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='label'>result:</span> <span class='id identifier rubyid_return_value'>return_value</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_return_value'>return_value</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_class_instance'>class_instance</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='ivar'>@method_access</span><span class='comma'>,</span> <span class='ivar'>@method_name</span><span class='rparen'>)</span>

  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mock_reset-instance_method">
  
    #<strong>mock_reset</strong>  &#x21d2; <tt><span class='object_link'><a href="MockMethod/MockExecutions.html" title="Grift::MockMethod::MockExecutions (class)">Grift::MockMethod::MockExecutions</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Clears the mock execution and calls data for this mock, and mocks the method to return ‘nil`.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="MockMethod/MockExecutions.html" title="Grift::MockMethod::MockExecutions (class)">Grift::MockMethod::MockExecutions</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


92
93
94
95
96</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/grift/mock_method.rb', line 92</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mock_reset'>mock_reset</span>
  <span class='id identifier rubyid_executions'>executions</span> <span class='op'>=</span> <span class='id identifier rubyid_mock_clear'>mock_clear</span>
  <span class='id identifier rubyid_mock_return_value'>mock_return_value</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_executions'>executions</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mock_restore-instance_method">
  
    #<strong>mock_restore</strong>(watch: false)  &#x21d2; <tt><span class='object_link'><a href="MockMethod/MockExecutions.html" title="Grift::MockMethod::MockExecutions (class)">Grift::MockMethod::MockExecutions</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Clears the mock execution and calls data for this mock, and restores the method to its original behavior. By default it also stops watching the method. This cleans up the mocking and restores expected behavior.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>watch</span>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>false</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>whether or not to keep watching the method</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="MockMethod/MockExecutions.html" title="Grift::MockMethod::MockExecutions (class)">Grift::MockMethod::MockExecutions</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


108
109
110
111
112
113</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/grift/mock_method.rb', line 108</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mock_restore'>mock_restore</span><span class='lparen'>(</span><span class='label'>watch:</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_executions'>executions</span> <span class='op'>=</span> <span class='id identifier rubyid_mock_clear'>mock_clear</span>
  <span class='id identifier rubyid_unmock_method'>unmock_method</span> <span class='kw'>if</span> <span class='ivar'>@true_method_cached</span>
  <span class='id identifier rubyid_watch_method'>watch_method</span> <span class='kw'>if</span> <span class='id identifier rubyid_watch'>watch</span>
  <span class='id identifier rubyid_executions'>executions</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="mock_return_value-instance_method">
  
    #<strong>mock_return_value</strong>(return_value = nil)  &#x21d2; <tt>self</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Accepts a value and mocks the method to return that value instead of executing its original behavior while mocked.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_my_mock'>my_mock</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../Grift.html" title="Grift (module)">Grift</a></span></span><span class='period'>.</span><span class='id identifier rubyid_spy_on'><span class='object_link'><a href="../Grift.html#spy_on-class_method" title="Grift.spy_on (method)">spy_on</a></span></span><span class='lparen'>(</span><span class='const'>String</span><span class='comma'>,</span> <span class='symbol'>:upcase</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_mock_return_value'>mock_return_value</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>BANANA</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>apple</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id identifier rubyid_upcase'>upcase</span>
<span class='comment'>#=&gt; &#39;BANANA&#39;</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>return_value</span>
      
      
        <span class='type'></span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'>
<p>the value to return from the method</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>self</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>the mock itself</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>Grift#mock</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


168
169
170
171
172
173
174
175
176
177
178
179
180
181</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/grift/mock_method.rb', line 168</span>

<span class='kw'>def</span> <span class='id identifier rubyid_mock_return_value'>mock_return_value</span><span class='lparen'>(</span><span class='id identifier rubyid_return_value'>return_value</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_premock_setup'>premock_setup</span>
  <span class='id identifier rubyid_mock_executions'>mock_executions</span> <span class='op'>=</span> <span class='ivar'>@mock_executions</span> <span class='comment'># required to access inside class instance block
</span>
  <span class='id identifier rubyid_class_instance'>class_instance</span><span class='period'>.</span><span class='id identifier rubyid_remove_method'>remove_method</span><span class='lparen'>(</span><span class='ivar'>@method_name</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='op'>!</span><span class='ivar'>@inherited</span> <span class='op'>&amp;&amp;</span> <span class='id identifier rubyid_method_defined?'>method_defined?</span>
  <span class='id identifier rubyid_class_instance'>class_instance</span><span class='period'>.</span><span class='id identifier rubyid_define_method'>define_method</span> <span class='ivar'>@method_name</span> <span class='kw'>do</span> <span class='op'>|</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>**</span><span class='id identifier rubyid_kwargs'>kwargs</span><span class='op'>|</span>
    <span class='comment'># record the args passed in the call to the method and the result
</span>    <span class='id identifier rubyid_mock_executions'>mock_executions</span><span class='period'>.</span><span class='id identifier rubyid_store'>store</span><span class='lparen'>(</span><span class='label'>args:</span> <span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='label'>kwargs:</span> <span class='id identifier rubyid_kwargs'>kwargs</span><span class='comma'>,</span> <span class='label'>result:</span> <span class='id identifier rubyid_return_value'>return_value</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id identifier rubyid_return_value'>return_value</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_class_instance'>class_instance</span><span class='period'>.</span><span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='ivar'>@method_access</span><span class='comma'>,</span> <span class='ivar'>@method_name</span><span class='rparen'>)</span>

  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_s-instance_method">
  
    #<strong>to_s</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>String representation of the MockMethod</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#hash_key-class_method" title="Grift::MockMethod.hash_key (method)">hash_key</a></span></li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


190
191
192</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/grift/mock_method.rb', line 190</span>

<span class='kw'>def</span> <span class='id identifier rubyid_to_s'>to_s</span>
  <span class='const'><span class='object_link'><a href="../Grift.html" title="Grift (module)">Grift</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="" title="Grift::MockMethod (class)">MockMethod</a></span></span><span class='period'>.</span><span class='id identifier rubyid_hash_key'><span class='object_link'><a href="#hash_key-class_method" title="Grift::MockMethod.hash_key (method)">hash_key</a></span></span><span class='lparen'>(</span><span class='ivar'>@klass</span><span class='comma'>,</span> <span class='ivar'>@method_name</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Mon Mar 14 21:41:20 2022 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.27 (ruby-2.7.5).
</div>

    </div>
  </body>
</html>